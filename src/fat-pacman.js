/* globals Crafty, _ */
(function() {
    "use strict";
    var box_size = 30,
        pacMap = [
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
            [1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1],
            [1,0,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,0,1],
            [1,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,1],
            [1,1,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,1,1],
            [0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0],
            [1,1,1,1,0,1,0,1,1,2,1,1,0,1,0,1,1,1,1],
            [0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0],  // <-- center
            [1,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,1],
            [0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0],
            [1,1,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,1,1],
            [1,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,1],
            [1,0,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,0,1],
            [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
            [1,0,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,0,1],
            [1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
        ];


    Crafty.init(box_size*pacMap[0].length,box_size*pacMap.length, document.getElementById('game'));
    Crafty.background('#333');

    var line = 0;
    _.each(pacMap, function(pacLine) {
        var col = 0;
        _.each(pacLine, function(pacCell) {
            if (pacCell === 1 || pacCell === 2) {
            Crafty.e('2D, DOM, Color, Canvas, Wall')
                .attr({x: col*box_size, y: line*box_size, w: box_size, h: box_size})
                .color(pacCell === 1 ? '#00F' : '#a0a');
            }
            col++;
        });
        line++;
    });


})();